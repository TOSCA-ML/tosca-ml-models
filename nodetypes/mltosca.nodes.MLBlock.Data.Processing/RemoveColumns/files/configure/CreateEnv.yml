---
- hosts: localhost

  tasks:
    - name: Check if file exists
      stat:
        path: /home/artjom/Downloads/order.txt
      register: file_info

    - name: Append input to file
      copy:
        dest: /home/artjom/Downloads/order.txt
        content: |
          {{function_id}} | {{columns}}
          {% if file_info.stat.exists %}
          {{ lookup('file', '/home/artjom/Downloads/order.txt') }}
          {% endif %}
